  <h4 data-dfn-type="element" data-lt="iframe">The <dfn><code>iframe</code></dfn> element</h4>

  <dl class="element">
   <dt><span data-x="concept-element-categories">Categories</span>:</dt>
   <dd><span>Flow content</span>.</dd>
   <dd><span>Phrasing content</span>.</dd>
   <dd><span>Embedded content</span>.</dd>
   <dd><span>Interactive content</span>.</dd>
   <dd><span>Palpable content</span>.</dd>
   <dt><span data-x="concept-element-contexts">Contexts in which this element can be used</span>:</dt>
   <dd>Where <span>embedded content</span> is expected.</dd>
   <dt><span data-x="concept-element-content-model">Content model</span>:</dt>
   <dd><span data-x="concept-content-nothing">Nothing</span>.</dd>
   <dt><span data-x="concept-element-attributes">Content attributes</span>:</dt>
   <dd><span>Global attributes</span></dd>
   <dd><code data-x="attr-iframe-src">src</code></dd>
   <dd><code data-x="attr-iframe-srcdoc">srcdoc</code></dd>
   <dd><code data-x="attr-iframe-name">name</code></dd>
   <dd><code data-x="attr-iframe-sandbox">sandbox</code></dd>
   <dd><code data-x="attr-iframe-allowfullscreen">allowfullscreen</code></dd>
   <dd><code data-x="attr-iframe-allowusermedia">allowusermedia</code></dd>
   <dd><code data-x="attr-dim-width">width</code></dd>
   <dd><code data-x="attr-dim-height">height</code></dd>
   <dd><code data-x="attr-iframe-referrerpolicy">referrerpolicy</code></dd>
   <dt><span data-x="concept-element-dom">DOM interface</span>:</dt><!--TOPIC:DOM APIs-->
   <dd>
<pre class="idl">[<span>HTMLConstructor</span>]
interface <dfn>HTMLIFrameElement</dfn> : <span>HTMLElement</span> {
  [<span>CEReactions</span>] attribute USVString <span data-x="dom-iframe-src">src</span>;
  [<span>CEReactions</span>] attribute DOMString <span data-x="dom-iframe-srcdoc">srcdoc</span>;
  [<span>CEReactions</span>] attribute DOMString <span data-x="dom-iframe-name">name</span>;
  [<span>CEReactions</span>, SameObject, PutForwards=<span data-x="dom-DOMTokenList-value">value</span>] readonly attribute <span>DOMTokenList</span> <span data-x="dom-iframe-sandbox">sandbox</span>;
  [<span>CEReactions</span>] attribute boolean <span data-x="dom-iframe-allowFullscreen">allowFullscreen</span>;
  [<span>CEReactions</span>] attribute boolean <span data-x="dom-iframe-allowUserMedia">allowUserMedia</span>;
  [<span>CEReactions</span>] attribute DOMString <span data-x="dom-dim-width">width</span>;
  [<span>CEReactions</span>] attribute DOMString <span data-x="dom-dim-height">height</span>;
  [<span>CEReactions</span>] attribute DOMString <span data-x="dom-iframe-referrerPolicy">referrerPolicy</span>;
  readonly attribute <span>Document</span>? <span data-x="dom-iframe-contentDocument">contentDocument</span>;
  readonly attribute <span>WindowProxy</span>? <span data-x="dom-iframe-contentWindow">contentWindow</span>;
  <span>Document</span>? <span data-x="dom-media-getSVGDocument">getSVGDocument</span>();
};</pre>
   </dd>
  </dl><!--TOPIC:HTML-->

  <!-- INTRO -->

  <p>The <code>iframe</code> element <span>represents</span> a <span>nested browsing
  context</span>.</p>


  <!-- SRC/SRCDOC -->

  <p>The <dfn><code data-x="attr-iframe-src">src</code></dfn> attribute gives the <span>URL</span>
  of a page that the <span>nested browsing context</span> is to contain. The attribute, if present,
  must be a <span>valid non-empty URL potentially surrounded by spaces</span>. If the <code
  data-x="attr-itemprop">itemprop</code> is specified on an <code>iframe</code> element, then the
  <code data-x="attr-iframe-src">src</code> attribute must also be specified.</p>

  <p>The <dfn data-export="" data-dfn-for="iframe" data-dfn-type="element-attr"><code
  data-x="attr-iframe-srcdoc">srcdoc</code></dfn> attribute gives the content of the page that the
  <span>nested browsing context</span> is to contain. The value of the attribute is the source of
  <dfn data-export="">an <code>iframe</code> <code data-x="attr-iframe-srcdoc">srcdoc</code>
  document</dfn>.</p>

  <p>The <code data-x="attr-iframe-srcdoc">srcdoc</code> attribute, if present, must have a value
  using <span>the HTML syntax</span> that consists of the following syntactic components, in the
  given order:</p>

  <ol>

   <li>Any number of <span data-x="syntax-comments">comments</span> and <span data-x="space
   character">space characters</span>.</li>

   <li>Optionally, a <span data-x="syntax-doctype">DOCTYPE</span>.

   <li>Any number of <span data-x="syntax-comments">comments</span> and <span data-x="space
   character">space characters</span>.</li>

   <li>The <span>document element</span>, in the form of an <code>html</code> <span
   data-x="syntax-elements">element</span>.</li>

   <li>Any number of <span data-x="syntax-comments">comments</span> and <span data-x="space
   character">space characters</span>.</li>

  </ol>

  <p class="note">The above requirements apply in <span>XML documents</span> as well.

  <div class="example">

   <p>Here a blog uses the <code data-x="attr-iframe-srcdoc">srcdoc</code> attribute in conjunction
   with the <code data-x="attr-iframe-sandbox">sandbox</code> attribute described below to provide
   users of user agents that support this feature with an extra layer of protection from script
   injection in the blog post comments:</p>

   <pre>&lt;article>
 &lt;h1>I got my own magazine!&lt;/h1>
 &lt;p>After much effort, I've finally found a publisher, and so now I
 have my own magazine! Isn't that awesome?! The first issue will come
 out in September, and we have articles about getting food, and about
 getting in boxes, it's going to be great!&lt;/p>
 &lt;footer>
  &lt;p>Written by &lt;a href="/users/cap">cap&lt;/a>, 1 hour ago.
 &lt;/footer>
 &lt;article>
  &lt;footer> Thirteen minutes ago, &lt;a href="/users/ch">ch&lt;/a> wrote: &lt;/footer>
  &lt;iframe sandbox srcdoc="&lt;p>did you get a cover picture yet?">&lt;/iframe>
 &lt;/article>
 &lt;article>
  &lt;footer> Nine minutes ago, &lt;a href="/users/cap">cap&lt;/a> wrote: &lt;/footer>
  &lt;iframe sandbox srcdoc="&lt;p>Yeah, you can see it &lt;a href=&amp;quot;/gallery?mode=cover&amp;amp;amp;page=1&amp;quot;>in my gallery&lt;/a>.">&lt;/iframe>
 &lt;/article>
 &lt;article>
  &lt;footer> Five minutes ago, &lt;a href="/users/ch">ch&lt;/a> wrote: &lt;/footer>
  &lt;iframe sandbox srcdoc="&lt;p>hey that's earl's table.
&lt;p>you should get earl&amp;amp;amp;me on the next cover.">&lt;/iframe>
 &lt;/article></pre>

   <p>Notice the way that quotes have to be escaped (otherwise the <code
   data-x="attr-iframe-srcdoc">srcdoc</code> attribute would end prematurely), and the way raw
   ampersands (e.g. in URLs or in prose) mentioned in the sandboxed content have to be
   <em>doubly</em> escaped &mdash; once so that the ampersand is preserved when originally parsing
   the <code data-x="attr-iframe-srcdoc">srcdoc</code> attribute, and once more to prevent the
   ampersand from being misinterpreted when parsing the sandboxed content.</p>

   <p>Furthermore, notice that since the <span data-x="syntax-doctype">DOCTYPE</span> is optional in
   <span data-x="an iframe srcdoc document"><code>iframe</code> <code
   data-x="attr-iframe-srcdoc">srcdoc</code> documents</span>, and the <code>html</code>,
   <code>head</code>, and <code>body</code> elements have <a href="#syntax-tag-omission">optional
   start and end tags</a>, and the <code>title</code> element is also optional in <span data-x="an iframe
   srcdoc document"><code>iframe</code> <code data-x="attr-iframe-srcdoc">srcdoc</code>
   documents</span>, the markup in a <code data-x="attr-iframe-srcdoc">srcdoc</code> attribute can be
   relatively succinct despite representing an entire document, since only the contents of the
   <code>body</code> element need appear literally in the syntax. The other elements are still
   present, but only by implication.</p>

  </div>

  <p class="note">In <span>the HTML syntax</span>, authors need only remember to use U+0022
  QUOTATION MARK characters (") to wrap the attribute contents and then to escape all U+0022
  QUOTATION MARK (") and U+0026 AMPERSAND (&amp;) characters, and to specify the <code
  data-x="attr-iframe-sandbox">sandbox</code> attribute, to ensure safe embedding of content.</p>

  <p class="note">In XML the U+003C LESS-THAN SIGN character (&lt;) needs to be escaped as well. In
  order to prevent <a href="https://www.w3.org/TR/xml/#AVNormalize">attribute-value
  normalization</a>, some of XML's whitespace characters &mdash; specifically U+0009 CHARACTER
  TABULATION (tab), U+000A LINE FEED (LF), and U+000D CARRIAGE RETURN (CR) &mdash; also need to be
  escaped. <ref spec=XML></p>

  <p class="note">If the <code data-x="attr-iframe-src">src</code> attribute and the <code
  data-x="attr-iframe-srcdoc">srcdoc</code> attribute are both specified together, the <code
  data-x="attr-iframe-srcdoc">srcdoc</code> attribute takes priority. This allows authors to provide
  a fallback <span>URL</span> for legacy user agents that do not support the <code
  data-x="attr-iframe-srcdoc">srcdoc</code> attribute.</p>


  <div w-nodev>

  <hr> <!-- SRC/SRCDOC PROCESSING MODEL -->

  <p>When an <code>iframe</code> element is <span data-x="node is inserted into a document">inserted
  into a document</span> that has a <span data-x="concept-document-bc">browsing context</span>, the
  user agent must <span data-x="creating a new browsing context">create a new browsing
  context</span>, set the element's <span>nested browsing context</span> to the newly-created
  <span>browsing context</span>, and then <span>process the <code>iframe</code> attributes</span>
  for the "first time".</p>

  <p>When an <code>iframe</code> element is <span data-x="node is removed from a document">removed
  from a document</span>, the user agent must <span data-x="a browsing context is
  discarded">discard</span> the element's <span>nested browsing context</span>, if it is not null,
  and then set the element's <span>nested browsing context</span> to null.</p>

  <p class="note">This happens without any <code data-x="event-unload">unload</code> events firing
  (the <span>nested browsing context</span> and its <code>Document</code> are <em><span data-x="a
  browsing context is discarded">discarded</span></em>, not <em><span data-x="unload a
  document">unloaded</span></em>).</p>

  <!-- START of section that's very similar to <frame> -->

  <p>Whenever an <code>iframe</code> element with a non-null <span>nested browsing context</span>
  has its <code data-x="attr-iframe-srcdoc">srcdoc</code> attribute set, changed, or removed, the
  user agent must <span>process the <code>iframe</code> attributes</span>.</p>

  <p>Similarly, whenever an <code>iframe</code> element with a non-null <span>nested browsing
  context</span> but with no <code data-x="attr-iframe-srcdoc">srcdoc</code> attribute specified has
  its <code data-x="attr-iframe-src">src</code> attribute set, changed, or removed, the user agent
  must <span>process the <code>iframe</code> attributes</span>.</p> <!-- It doesn't happen when the
  base URL is changed, though. -->

  <p>When the user agent is to <dfn>process the <code>iframe</code> attributes</dfn>, it must run
  the first appropriate steps from the following list:</p>

  <dl class="switch">

   <dt>If the <code data-x="attr-iframe-srcdoc">srcdoc</code> attribute is specified</dt>

   <dd>

    <p><span>Navigate</span><!--DONAV iframe--> the element's <span>nested browsing context</span>
    to a new <span data-x="concept-response">response</span> whose <span
    data-x="concept-response-url-list">url list</span> consists of <code>about:srcdoc</code>, <span
    data-x="concept-response-header-list">header list</span> consists of `<code
    data-x="">Content-Type</code>`/`<code>text/html</code>, <span
    data-x="concept-response-body">body</span> is the value of the attribute, <span
    data-x="concept-response-csp-list">CSP list</span> is the <span
    data-x="concept-document-csp-list">CSP list</span> of the <code>iframe</code> element's <span>node
    document</span>, <span data-x="concept-response-https-state">HTTPS state</span> is the <span
    data-x="concept-document-https-state">HTTPS state</span> of the <code>iframe</code> element's
    <span>node document</span>.

    <p>The resulting <code>Document</code> must be considered <span>an <code>iframe</code> <code
    data-x="attr-iframe-srcdoc">srcdoc</code> document</span>.</p>

   </dd>

   <dt>Otherwise, if the element has no <code data-x="attr-iframe-src">src</code> attribute
   specified, and the user agent is processing the <code>iframe</code>'s attributes for the "first
   time"</dt>

   <dd>

    <p><span>Queue a task</span> to run the <span>iframe load event steps</span>.</p>

    <p>The <span>task source</span> for this <span data-x="concept-task">task</span> is the
    <span>DOM manipulation task source</span>.</p>

   </dd>

   <dt>Otherwise</dt>

   <dd><p>Run the <span>otherwise steps for <code>iframe</code> or <code>frame</code>
   elements</span>.</p></dd>

  </dl>

  <p>The <dfn>otherwise steps for <code>iframe</code> or <code>frame</code> elements</dfn> are as
  follows:</p>

  <ol>
   <li>
    <p>If the element has no <code data-x="attr-iframe-src">src</code> attribute specified, or its
    value is the empty string, let <var>url</var> be the <span>URL</span>
    "<code>about:blank</code>".</p>
    <!-- https://software.hixie.ch/utilities/js/live-dom-viewer/?saved=2641 -->

    <p>Otherwise, <span data-x="parse a url">parse</span> the value of the <code
    data-x="attr-iframe-src">src</code> attribute, relative to the element's <span>node
    document</span>.</p>

    <p>If that is not successful, then let <var>url</var> be the <span>URL</span>
    "<code>about:blank</code>". Otherwise, let <var>url</var> be the <span>resulting URL
    record</span>.</p>
   </li>

   <li><p>If there exists an <span>ancestor browsing context</span> whose <span>active
   document</span>'s <span data-x="concept-document-url">URL</span>, ignoring <span
   data-x="concept-url-fragment">fragments</span>, is equal to <var>url</var>, then abort these
   steps.</p></li>
   <!-- https://www.hixie.ch/tests/adhoc/html/frames/iframes/ 008.html and 009.html -->
   <!-- https://software.hixie.ch/utilities/js/live-dom-viewer/?saved=1969 -->
   <!-- I'm assuming that "resolve" will normalize things like scheme and hostname case -->

   <li><p>Let <var>resource</var> be a new <span data-x="concept-request">request</span> whose <span
   data-x="concept-request-url">url</span> is <var>url</var> and whose <span
   data-x="concept-request-referrer-policy">referrer policy</span> is the current state of the
   element's <code data-x="attr-iframe-referrerpolicy">referrerpolicy</code> content
   attribute.</p></li>

   <li><p><span>Navigate</span><!--DONAV iframe--> the element's <span>nested browsing
   context</span> to <var>resource</var>.</p></li>
  </ol>

  <p>Any <span data-x="navigate">navigation</span> required of the user agent in the <span>process
  the <code>iframe</code> attributes</span> algorithm must use the <code>iframe</code> element's
  <span>node document</span>'s <span>browsing context</span> as the <span>source browsing
  context</span>.</p>

  <p>Furthermore, if the <span>active document</span> of the element's <span>nested browsing
  context</span> before such a <span data-x="navigate">navigation</span> was not <span>completely
  loaded</span> at the time of the new <span data-x="navigate">navigation</span>, then the <span
  data-x="navigate">navigation</span> must be completed with <span>replacement enabled</span>.</p>

  <p>Similarly, if the <span>nested browsing context</span>'s <span>session history</span> contained
  only one <code>Document</code> when the <span>process the <code>iframe</code> attributes</span>
  algorithm was invoked, and that was the <code>about:blank</code> <code>Document</code> created
  when the <span>nested browsing context</span> was created, then any <span
  data-x="navigate">navigation</span> required of the user agent in that algorithm must be completed
  with <span>replacement enabled</span>.</p> <!-- see also the note near similar text for the
  location.assign() method -->

  <p>When a <code>Document</code> in an <code>iframe</code> is marked as <span>completely
  loaded</span>, the user agent must run the <span>iframe load event steps</span> <span>in parallel</span>.</p>

  <p class="note">A <code data-x="event-load">load</code> event is also fired at the
  <code>iframe</code> element when it is created if no other data is loaded in it.</p>

  <p>Each <code>Document</code> has an <dfn>iframe load in progress</dfn> flag and a <dfn>mute
  iframe load</dfn> flag. When a <code>Document</code> is created, these flags must be unset for
  that <code>Document</code>.</p>

  <p>The <dfn>iframe load event steps</dfn> are as follows:</p>

  <ol>

   <li><p>Let <var>child document</var> be the <span>active document</span> of the
   <code>iframe</code> element's <span>nested browsing context</span> (which cannot be null at this
   point).</p></li>

   <li><p>If <var>child document</var> has its <span>mute iframe load</span> flag set,
   abort these steps.</p></li>

   <li><p>Set <var>child document</var>'s <span>iframe load in progress</span>
   flag.</p></li>

   <li><p><span data-x="concept-event-fire">Fire an event</span> named <code
   data-x="event-load">load</code> at the <code>iframe</code> element.</p></li>

   <li><p>Unset <var>child document</var>'s <span>iframe load in progress</span>
   flag.</p></li>

  </ol>

  <p class="warning">This, in conjunction with scripting, can be used to probe the URL space of the
  local network's HTTP servers. User agents may implement <span data-x="origin">cross-origin</span>
  access control policies that are stricter than those described above to mitigate this attack, but
  unfortunately such policies are typically not compatible with existing Web content.</p>

  <p>When the <code>iframe</code>'s <span>browsing context</span>'s <span>active document</span> is
  not <span>ready for post-load tasks</span>, and when anything in the <code>iframe</code> is <span
  data-x="delay the load event">delaying the load event</span> of the <code>iframe</code>'s
  <span>browsing context</span>'s <span>active document</span>, and when the <code>iframe</code>'s
  <span>browsing context</span> is in the <span>delaying <code data-x="event-load">load</code> events
  mode</span>, the <code>iframe</code> must <span>delay the load event</span> of its document.</p>

  <p class="note">If, during the handling of the <code data-x="event-load">load</code> event, the
  <span>browsing context</span> in the <code>iframe</code> is again <span
  data-x="navigate">navigated</span>, that will further <span>delay the load event</span>.</p>

  </div>

  <!-- END of section that's very similar to <frame> -->

  <p class="note">If, when the element is created, the <code
  data-x="attr-iframe-srcdoc">srcdoc</code> attribute is not set, and the <code
  data-x="attr-iframe-src">src</code> attribute is either also not set or set but its value cannot be
  <span data-x="parse a url">parsed</span>, the browsing context will remain at the initial
  <code>about:blank</code> page.</p>

  <p class="note">If the user <span data-x="navigate">navigates</span> away from this page, the
  <code>iframe</code>'s corresponding <code>WindowProxy</code> object will proxy new
  <code>Window</code> objects for new <code>Document</code> objects, but the <code
  data-x="attr-iframe-src">src</code> attribute will not change.</p>


  <hr> <!-- NAME -->

  <p>The <dfn><code data-x="attr-iframe-name">name</code></dfn> attribute, if present, must be a
  <span>valid browsing context name</span>. The given value is used to name the <span>nested
  browsing context</span>. <span w-nodev>When the browsing context is created, if the attribute
  is present, the <span>browsing context name</span> must be set to the value of this attribute;
  otherwise, the <span>browsing context name</span> must be set to the empty string.</span></p>

  <div w-nodev>

  <p>Whenever the <code data-x="attr-iframe-name">name</code> attribute is set, the nested
  <span>browsing context</span>'s <span data-x="browsing context name">name</span> must be changed to
  the new value. If the attribute is removed, the <span>browsing context name</span> must be set to
  the empty string.</p>

  </div>


  <hr> <!-- SANDBOX -->

  <p>The <dfn><code data-x="attr-iframe-sandbox">sandbox</code></dfn> attribute, when specified,
  enables a set of extra restrictions on any content hosted by the <code>iframe</code>. Its value
  must be an <span>unordered set of unique space-separated tokens</span> that are <span>ASCII
  case-insensitive</span>. The allowed values are <code
  data-x="attr-iframe-sandbox-allow-forms">allow-forms</code>, <code
  data-x="attr-iframe-sandbox-allow-modals">allow-modals</code>, <code
  data-x="attr-iframe-sandbox-allow-orientation-lock">allow-orientation-lock</code>, <code
  data-x="attr-iframe-sandbox-allow-pointer-lock">allow-pointer-lock</code>, <code
  data-x="attr-iframe-sandbox-allow-popups">allow-popups</code>, <code
  data-x="attr-iframe-sandbox-allow-popups-to-escape-sandbox">allow-popups-to-escape-sandbox</code>,
  <code data-x="attr-iframe-sandbox-allow-presentation">allow-presentation</code>, <code
  data-x="attr-iframe-sandbox-allow-same-origin">allow-same-origin</code>, <code
  data-x="attr-iframe-sandbox-allow-scripts">allow-scripts</code>, and <code
  data-x="attr-iframe-sandbox-allow-top-navigation">allow-top-navigation</code>.</p>

  <p>When the attribute is set, the content is treated as being from a unique <span>origin</span>,
  forms, scripts, and various potentially annoying APIs are disabled, links are prevented from
  targeting other <span data-x="browsing context">browsing contexts</span>, and plugins are secured.
  The <code data-x="attr-iframe-sandbox-allow-same-origin">allow-same-origin</code> keyword causes
  the content to be treated as being from its real origin instead of forcing it into a unique
  origin; the <code data-x="attr-iframe-sandbox-allow-top-navigation">allow-top-navigation</code>
  keyword allows the content to <span>navigate</span> its <span>top-level browsing context</span>;
  and the <code data-x="attr-iframe-sandbox-allow-forms">allow-forms</code>, <code
  data-x="attr-iframe-sandbox-allow-modals">allow-modals</code>, <code
  data-x="attr-iframe-sandbox-allow-orientation-lock">allow-orientation-lock</code>, <code
  data-x="attr-iframe-sandbox-allow-pointer-lock">allow-pointer-lock</code>, <code
  data-x="attr-iframe-sandbox-allow-popups">allow-popups</code>, <code
  data-x="attr-iframe-sandbox-allow-presentation">allow-presentation</code>, <code
  data-x="attr-iframe-sandbox-allow-scripts">allow-scripts</code>, and <code
  data-x="attr-iframe-sandbox-allow-popups-to-escape-sandbox">allow-popups-to-escape-sandbox</code>
  keywords re-enable forms, modal dialogs, screen orientation lock, the pointer lock API, popups,
  the presentation API, scripts, and the creation of unsandboxed <span data-x="auxiliary browsing
  context">auxiliary browsing contexts</span> respectively. <ref spec=POINTERLOCK>
  <ref spec=SCREENORIENTATION> <ref spec=PRESENTATION></p>

  <p class="warning">Setting both the <code
  data-x="attr-iframe-sandbox-allow-scripts">allow-scripts</code> and <code
  data-x="attr-iframe-sandbox-allow-same-origin">allow-same-origin</code> keywords together when the
  embedded page has the <span>same origin</span> as the page containing the <code>iframe</code>
  allows the embedded page to simply remove the <code data-x="attr-iframe-sandbox">sandbox</code>
  attribute and then reload itself, effectively breaking out of the sandbox altogether.</p>

  <p class="warning">These flags only take effect when the <span>nested browsing context</span> of
  the <code>iframe</code> is <span data-x="navigate">navigated</span>. Removing them, or removing the
  entire <code data-x="attr-iframe-sandbox">sandbox</code> attribute, has no effect on an
  already-loaded page.</p>

  <p class="warning">Potentially hostile files should not be served from the same server as the file
  containing the <code>iframe</code> element. Sandboxing hostile content is of minimal help if an
  attacker can convince the user to just visit the hostile content directly, rather than in the
  <code>iframe</code>. To limit the damage that can be caused by hostile HTML content, it should be
  served from a separate dedicated domain. Using a different domain ensures that scripts in the
  files are unable to attack the site, even if the user is tricked into visiting those pages
  directly, without the protection of the <code data-x="attr-iframe-sandbox">sandbox</code>
  attribute.</p>

  <div w-nodev>

  <!-- v2: Add a new attribute that enables new restrictions, e.g.:
       - disallow cross-origin loads of any kind (networking
         override that only allows same-origin URLs or about:,
         javascript:, data:)
       - block access to 'parent.frames' from sandbox
  -->

  <p>When an <code>iframe</code> element with a <code data-x="attr-iframe-sandbox">sandbox</code>
  attribute has its <span>nested browsing context</span> created (before the initial
  <code>about:blank</code> <code>Document</code> is created), and when an <code>iframe</code>
  element's <code data-x="attr-iframe-sandbox">sandbox</code> attribute is set or changed while it
  has a <span>nested browsing context</span>, the user agent must <span data-x="parse a sandboxing
  directive">parse the sandboxing directive</span> using the attribute's value as the
  <var>input</var> and the <code>iframe</code> element's <span>nested browsing context</span>'s
  <span><code>iframe</code> sandboxing flag set</span> as the output.</p>

  <p>When an <code>iframe</code> element's <code data-x="attr-iframe-sandbox">sandbox</code>
  attribute is removed while it has a non-null <span>nested browsing context</span>, the user agent
  must empty the <code>iframe</code> element's <span>nested browsing context</span>'s
  <span><code>iframe</code> sandboxing flag set</span> as the output.</p>

  </div>

  <div class="example">

   <p>In this example, some completely-unknown, potentially hostile, user-provided HTML content is
   embedded in a page. Because it is served from a separate domain, it is affected by all the normal
   cross-site restrictions. In addition, the embedded page has scripting disabled, plugins disabled,
   forms disabled, and it cannot navigate any frames or windows other than itself (or any frames or
   windows it itself embeds).</p>

   <pre>&lt;p>We're not scared of you! Here is your content, unedited:&lt;/p>
&lt;iframe sandbox src="https://usercontent.example.net/getusercontent.cgi?id=12193">&lt;/iframe></pre>

   <p class="warning">It is important to use a separate domain so that if the attacker convinces the
   user to visit that page directly, the page doesn't run in the context of the site's origin, which
   would make the user vulnerable to any attack found in the page.</p>

  </div>

  <div class="example">

   <p>In this example, a gadget from another site is embedded. The gadget has scripting and forms
   enabled, and the origin sandbox restrictions are lifted, allowing the gadget to communicate with
   its originating server. The sandbox is still useful, however, as it disables plugins and popups,
   thus reducing the risk of the user being exposed to malware and other annoyances.</p>

   <pre>&lt;iframe sandbox="allow-same-origin allow-forms allow-scripts"
        src="https://maps.example.com/embedded.html">&lt;/iframe></pre>

  </div>

  <div class="example">

   <p>Suppose a file A contained the following fragment:</p>

   <pre>&lt;iframe sandbox="allow-same-origin allow-forms" src=B>&lt;/iframe></pre>

   <p>Suppose that file B contained an iframe also:</p>

   <pre>&lt;iframe sandbox="allow-scripts" src=C>&lt;/iframe></pre>

   <p>Further, suppose that file C contained a link:</p>

   <pre>&lt;a href=D>Link&lt;/a></pre>

   <p>For this example, suppose all the files were served as <code>text/html</code>.</p>

   <p>Page C in this scenario has all the sandboxing flags set. Scripts are disabled, because the
   <code>iframe</code> in A has scripts disabled, and this overrides the <code
   data-x="attr-iframe-sandbox-allow-scripts">allow-scripts</code> keyword set on the
   <code>iframe</code> in B. Forms are also disabled, because the inner <code>iframe</code> (in B)
   does not have the <code data-x="attr-iframe-sandbox-allow-forms">allow-forms</code> keyword
   set.</p>

   <p>Suppose now that a script in A removes all the <code
   data-x="attr-iframe-sandbox">sandbox</code> attributes in A <!--grammar-check-override--> and B.
   This would change nothing immediately. If the user clicked the link in C, loading page D into the
   <code>iframe</code> in B, page D would now act as if the <code>iframe</code> in B had the <code
   data-x="attr-iframe-sandbox-allow-same-origin">allow-same-origin</code> and <code
   data-x="attr-iframe-sandbox-allow-forms">allow-forms</code> keywords set, because that was the
   state of the <span>nested browsing context</span> in the <code>iframe</code> in A when page B was
   loaded.</p>

   <p>Generally speaking, dynamically removing or changing the <code
   data-x="attr-iframe-sandbox">sandbox</code> attribute is ill-advised, because it can make it quite
   hard to reason about what will be allowed and what will not.</p>

  </div>


  <hr> <!-- ALLOW FULLSCREEN / USER MEDIA -->

  <p>The <dfn><code data-x="attr-iframe-allowfullscreen">allowfullscreen</code></dfn> attribute is a
  <span>boolean attribute</span>. When specified, it indicates that <code>Document</code> objects in
  the <code>iframe</code> element's <span>browsing context</span> are to be allowed to use <code
  data-x="dom-element-requestFullscreen">requestFullscreen()</code> (if it's not blocked for other
  reasons, e.g. there is another ancestor <code>iframe</code> without this attribute set).</p>

  <div class="example">

   <p>Here, an <code>iframe</code> is used to embed a player from a video site. The <code
   data-x="attr-iframe-allowfullscreen">allowfullscreen</code> attribute is needed to enable the
   player to show its video fullscreen.</p>

   <pre>&lt;article>
 &lt;header>
  &lt;p>&lt;img src="/usericons/1627591962735"> &lt;b>Fred Flintstone&lt;/b>&lt;/p>
  &lt;p>&lt;a href="/posts/3095182851" rel=bookmark>12:44&lt;/a> &mdash; &lt;a href="#acl-3095182851">Private Post&lt;/a>&lt;/p>
 &lt;/header>
 &lt;main>
  &lt;p>Check out my new ride!&lt;/p>
  <strong>&lt;iframe src="https://video.example.com/embed?id=92469812" allowfullscreen>&lt;/iframe></strong>
 &lt;/main>
&lt;/article></pre>

  </div>

  <p>The <dfn><code data-x="attr-iframe-allowusermedia">allowusermedia</code></dfn> attribute is a
  <span>boolean attribute</span>. When specified, it indicates that <code>Document</code> objects in
  the <code>iframe</code> element's <span>browsing context</span> are to be allowed to use <code
  data-x="dom-MediaDevices-getUserMedia">getUserMedia()</code> (if it's not blocked for other
  reasons, e.g. there is another ancestor <code>iframe</code> without this attribute set).</p>

  <div w-nodev>
   <p id="fullscreen-logic">To determine whether a <code>Document</code> object <var>document</var>
   is <dfn data-export="">allowed to use</dfn> the feature indicated by attribute name
   <var>allowattribute</var>, run these steps:</p>

   <ol>
    <li><p>If <var>document</var> has no <span data-x="concept-document-bc">browsing context</span>,
    then return false.</p></li>

    <li><p>If <var>document</var>'s <span data-x="concept-document-bc">browsing context</span> is a
    <span>top-level browsing context</span>, then return true.</p></li>

    <li><p>If <var>document</var>'s <span data-x="concept-document-bc">browsing context</span> has a
    <span>browsing context container</span> that is an <code>iframe</code> element with an
    <var>allowattribute</var> attribute specified, and whose <span>node document</span> is
    <span>allowed to use</span> the feature indicated by <var>allowattribute</var>, then return
    true.</p></li>

    <li><p>Return false.</p></li>
   </ol>
  </div>

  <hr> <!-- DIM ATTRIBUTES -->

  <p>The <code>iframe</code> element supports <span>dimension attributes</span> for cases where the
  embedded content has specific dimensions (e.g. ad units have well-defined dimensions).</p>

  <p>An <code>iframe</code> element never has <span>fallback content</span>, as it will always
  <span data-x="creating a new browsing context">create</span> a nested <span>browsing context</span>, regardless of whether the specified initial
  contents are successfully used.</p>

  <hr> <!-- REFERRERPOLICY ATTRIBUTE -->

  <p>The <dfn data-x="attr-iframe-referrerpolicy"><code>referrerpolicy</code></dfn> attribute is a
  <span>referrer policy attribute</span>. Its purpose is to set the <span>referrer policy</span>
  used when <span data-x="process the iframe attributes">processing the <code>iframe</code>
  attributes</span>. <ref spec=REFERRERPOLICY></p>

  <hr> <!-- FALLBACK -->

  <p>Descendants of <code>iframe</code> elements represent nothing. (In legacy user agents that do
  not support <code>iframe</code> elements, the contents would be parsed as markup that could act as
  fallback content.)</p>

  <p class="note">The <span>HTML parser</span> treats markup inside <code>iframe</code> elements as
  text.</p>


  <div w-nodev>

  <hr> <!-- DOM -->

  <p>The IDL attributes <dfn><code data-x="dom-iframe-src">src</code></dfn>, <dfn><code
  data-x="dom-iframe-srcdoc">srcdoc</code></dfn>, <dfn><code
  data-x="dom-iframe-name">name</code></dfn>,and <dfn><code
  data-x="dom-iframe-sandbox">sandbox</code></dfn> must <span>reflect</span> the respective content
  attributes of the same name.</p>

  <p>The <span data-x="concept-supported-tokens">supported tokens</span> for <code
  data-x="dom-iframe-sandbox">sandbox</code>'s <code>DOMTokenList</code> are the allowed
  values defined in the <code data-x="attr-iframe-sandbox">sandbox</code> attribute and supported by
  the user agent.</p>

  <p>The <dfn><code data-x="dom-iframe-allowFullscreen">allowFullscreen</code></dfn> IDL attribute
  must <span>reflect</span> the <code data-x="attr-iframe-allowfullscreen">allowfullscreen</code>
  content attribute.</p>

  <p>The <dfn><code data-x="dom-iframe-allowUserMedia">allowUserMedia</code></dfn> IDL attribute
  must <span>reflect</span> the <code data-x="attr-iframe-allowusermedia">allowusermedia</code>
  content attribute.</p>

  <p>The <dfn><code data-x="dom-iframe-referrerPolicy">referrerPolicy</code></dfn> IDL attribute
  must <span>reflect</span> the <code data-x="attr-iframe-referrerpolicy">referrerpolicy</code>
  content attribute, <span>limited to only known values</span>.</p>

  <p>The <dfn><code data-x="dom-iframe-contentDocument">contentDocument</code></dfn> IDL attribute,
  on getting, must return the <code>iframe</code> element's <span
  data-x="concept-bcc-content-document">content document</span>.</p>

  <p>The <dfn><code data-x="dom-iframe-contentWindow">contentWindow</code></dfn> IDL attribute must
  return the <code>WindowProxy</code> object of the <code>iframe</code> element's <span>nested
  browsing context</span>, if its <span>nested browsing context</span> is non-null, or null
  otherwise.</p>

  </div>

  <div class="example">

   <p>Here is an example of a page using an <code>iframe</code> to include advertising from an
   advertising broker:</p>

   <pre>&lt;iframe src="https://ads.example.com/?customerid=923513721&amp;amp;format=banner"
        width="468" height="60">&lt;/iframe></pre>

  </div>




